.header
  - if flash[:notice]
    .fixed-bottom.mx-3.text-left style='position: absolute;font-size:1rem;line-height:1.5'
      .alert.alert-warning.alert-dismissible.fade.show role="alert"
        button.close type="button" data-dismiss="alert" aria-label="Close"
          span aria-hidden="true" &times;
        = textalize flash[:notice]
  i#navBtn.fa.fa-navicon.btn.btn-secondary.my-2.mx-1.mx-sm-2.float-left.d-xl-none
  i#calendarBtn.fa.fa-calendar.btn.btn-secondary.my-2.mx-1.mx-sm-2.float-left.d-lg-none

  .d-none.d-md-block.mt-md-5.mb-1 Romerike Jujutsu Klubb

  .fb-buttons
    = link_to 'http://www.facebook.com/home.php#!/pages/Romerike-Jujutsu-Klubb/260684570923?ref=ts', target: 'facebook'
      i.fa.fa-facebook.btn.btn-secondary.my-2.mx-1.mx-sm-2.my-md-0
    - if user?
      = link_to 'https://www.facebook.com/groups/romerikejjk', target: 'facebook'
        i.fa.fa-facebook-square.btn.btn-secondary.my-2.mx-1.mx-sm-2.my-md-0>
    - unless current_user&.member
      = link_to 'Pr√∏v oss', 'http://nkfwww.kampsport.no/portal/page/portal/ks_utv/ks_bli_medlem?p_o3_pk_id=162', class: 'btn btn-secondary my-2 mx-1 mx-sm-2', target: 'NKF'

javascript:
    $('#navBtn').on('click', function () {
        console.log('menu clicked');
        $('.subnav').css('transform', 'translate(0px, 0)');
        $('#menuShadow').css('transition', 'visibility 0s, opacity 0.5s');
        $('#menuShadow').css('visibility', 'visible').css('opacity', '0.5');
        $("body").addClass("modal-open");
    });
    $('#calendarBtn').on('click', function () {
        console.log('calendar clicked');
        $('.main_right').css('transform', 'translate(0px, 0)');
        $('#sidebarShadow').css('transition', 'visibility 0s, opacity 0.5s');
        $('#sidebarShadow').css('visibility', 'visible').css('opacity', '0.5');
        $("body").addClass("modal-open");
    });

    $('.shadow').on('click', function () {
        console.log('shadow clicked');
        $('.subnav').css('transform', 'translate(-268px, 0)');
        $('.main_right').css('transform', 'translate(268px, 0)');
        $('.shadow').css('opacity', '0');
        $('.shadow').css('transition', 'visibility 0.5s, opacity 0.5s');
        $('.shadow').css('visibility', 'hidden');
        $("body").removeClass("modal-open")
    });

    $(function(){
    if (navigator.msMaxTouchPoints) {

        $('.subnav').addClass('ms-touch');

        $('.subnav').on('scroll', function () {
            console.log("scroll");
            $('.slide-image').css('transform', 'translate3d(-' + (100 - $(this).scrollLeft() / 6) + 'px,0,0)');
        });

    } else {

        var slider = {

            el: {
                slider: $(".subnav"),
                holder: $(".holder"),
                imgSlide: $(".slide-image")
            },

            slideWidth: $('.subnav').width(),
            touchstartx: undefined,
            touchmovex: undefined,
            movex: undefined,
            index: 0,
            longTouch: undefined,

            init: function () {
                this.bindUIEvents();
            },

            bindUIEvents: function () {
                console.log('bindUIEvents');
                $('.subnav').on("touchstart", function (event) {
                    console.log("touchstart");
                    slider.start(event);
                });

                $('.subnav').on("touchmove", function (event) {
                    console.log("touchmove: " + event);
                    slider.move(event);
                });

                $('.subnav').on("touchend", function (event) {
                    console.log("touchend");
                    slider.end(event);
                });

            },

            start: function (event) {
                // Test for flick.
                this.longTouch = false;
                setTimeout(function () {
                    slider.longTouch = true;
                }, 250);

                // Get the original touch position.
                this.touchstartx = event.originalEvent.touches[0].pageX;

                // The movement gets all janky if there's a transition on the elements.
                $('.animate').removeClass('animate');
            },

            move: function (event) {
                // Continuously return touch position.
                this.touchmovex = event.originalEvent.touches[0].pageX;
                // Calculate distance to translate holder.
                this.movex = this.index * this.slideWidth + (this.touchstartx - this.touchmovex);
                console.log('movex: ' + this.movex);
                // Defines the speed the images should move at.
                var panx = 100 - this.movex / 6;
                if (this.movex < 600) { // Makes the holder stop moving when there is no more content.
                    $('.subnav').css('transform', 'translate3d(-' + this.movex + 'px,0,0)');
                }
                if (panx < 100) { // Corrects an edge-case problem where the background image moves without the container moving.
                    this.el.imgSlide.css('transform', 'translate3d(-' + panx + 'px,0,0)');
                }
            },

            end: function (event) {
                // Calculate the distance swiped.
                var absMove = Math.abs(this.index * this.slideWidth - this.movex);
                // Calculate the index. All other calculations are based on the index.
                if (absMove > this.slideWidth / 2 || this.longTouch === false) {
                    if (this.movex > this.index * this.slideWidth && this.index < 2) {
                        this.index++;
                    } else if (this.movex < this.index * this.slideWidth && this.index > 0) {
                        this.index--;
                    }
                }
                // Move and animate the elements.
                this.el.holder.addClass('animate').css('transform', 'translate3d(-' + this.index * this.slideWidth + 'px,0,0)');
                this.el.imgSlide.addClass('animate').css('transform', 'translate3d(-' + 100 - this.index * 50 + 'px,0,0)');

            }

        };

        console.log("init");
        slider.init();
    }

    // $('.subnav').on("touchstart", function (event) {
    //     console.log("touchstart");
    // });
    //
    // $('.subnav').on("click", function (event) {
    //     console.log("click");
    // });
    //
    // $('body').on("touchstart", function (event) {
    //     console.log("touchstart");
    // });

    });