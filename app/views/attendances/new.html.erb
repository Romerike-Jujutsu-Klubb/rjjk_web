<h1>Registrer oppmøte</h1>

<%= form_for(@attendance) do |f| %>
    <%= f.error_messages %>

    <p style="float: left; margin-right: 2em">
      <%= f.label :member_id, 'Medlem' %>
      <%= f.select :member_id, [nil] + @members.map{|m| [m.name, m.id]} %>
    </p>

    <p>
      <%= f.label :status, 'Status' %>
      <%= f.select :status, Attendance::Status.constants.sort.map{|s| [t(s.to_s.downcase), Attendance::Status.const_get(s)]} %>
    </p>

    <%=f.fields_for :practice do |pf| %>
    <p>
      <%= pf.label :group_schedule_id, 'Trening' %>
      <%= pf.select :group_schedule_id, ['', ''] + @group_schedules.map{|gs| ["#{gs.group.name} #{gs.weekday_name}", gs.id]},
                   :value => '', :selected => '' %>
    </p>

    <p style="float: left; margin-right: 2em">
      <%= pf.label :year, 'År' %>
      <%= pf.text_field :year %>
    </p>

    <p>
      <%= pf.label :week, 'Uke' %>
      <%= pf.select :week, (1..52) %>
    </p>
        <% end %>

    <p>
      <%= f.submit 'Create', :class => 'btn btn-default' %>
    </p>
<% end %>

<%= link_to 'Back', attendances_path %>

<%=javascript_tag do %>
    $('#attendance_member_id').focus();
<% end %>
