<% @content_width =880 %>

<%= image_tag url_for(:controller => :attendances, :action => :month_chart, :year => @year, :month => @month, :size => '800x300', :format => :png),
              :title => 'OppmÃ¸te graf', :class => 'img-rounded', :style => 'width: 800px; height: 300px',
              :usemap => '#monthmap' %>

<map name="monthmap">
  <!--
  <area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury">
  <area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus">
  -->
</map>

<table class="table">
  <% @monthly_summary_per_group.each do |g, stats| %>
      <tr>
        <th><%= g.name %></th>
        <td><%= stats[:present].size %></td>
        <td>Gjennomsnittlig <%= (stats[:present].size.to_f / stats[:practices]).round %>
          deltakere pÃ¥ <%= stats[:practices] %> treninger
        </td>
      </tr>
  <% end %>
</table>

<h3>Antall deltakere</h3>

<table class="table">
  <tr>
    <th></th>
    <th style="text-align:center">Totalt</th>
    <th style="text-align:center">Tilstede +50%</th>
    <th style="text-align:center">Tilstede +67%</th>
  </tr>
  <% @by_group_and_member.each do |group, members| %>
      <tr>
        <th><%= group.name %></th>
        <td style="text-align:center"><%= members.select { |m, ats| true }.size %></td>
        <td style="text-align:center"><%= members.select { |m, ats| ats.size >= @monthly_summary_per_group[group][:practices] * 0.5 }.size %></td>
        <td style="text-align:center"><%= members.select { |m, ats| ats.size >= @monthly_summary_per_group[group][:practices] * 0.67 }.size %></td>
      </tr>
  <% end %>
</table>
