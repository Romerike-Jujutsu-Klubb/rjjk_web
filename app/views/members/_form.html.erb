<%=javascript_include_tag "CalendarPopup" %>
<script language="JavaScript">
var cal = new CalendarPopup();
</script>

<%= error_messages_for 'member' %>

<!--[form:member]-->
<style type="text/css">
table#spaced td {
  padding: 0.5em;
}
input.full {width: 16em;}
input.postal_code {width: 3em;}
input.half {width: 7.5em;}
</style>

<div style="float: left">
<% if @member.image_content_type %>
	<%=image_tag url_for(:action => :image_thumbnail, :id => @member.id, :format => @member.image_format), :title => @member.image_name, :style => 'float: left'%>
<% else %>
	Last opp bilde: 
<% end %>
<%=file_field :member, :image_file, :size => 8 %>
</div>

<table id="spaced" style="float: left" cellpadding="20px">
	<tr>
		<td valign="top">
<p><label for="member_first_name">Fornavn</label><br/>
<%= text_field 'member', 'first_name', :class => :full %></p>

<p><label for="member_last_name">Etternavn</label><br/>
<%= text_field 'member', 'last_name', :class => :full %></p>

<p><label for="member_address">Adresse</label><br/>
<%= text_field 'member', 'address', :class => :full %></p>

<p><label for="member_postal_code">Postnummer</label><br/>
<%= text_field 'member', 'postal_code', :class => :postal_code %></p>

<p><label for="member_email">E-post</label><br/>
<%= text_field 'member', 'email', :class => :full %></p>

<p style="float: left"><label for="member_phone_mobile">Telefon mobil</label><br/>
<%= text_field 'member', 'phone_mobile', :class => :half %></p>

<p style="float: right"><label for="member_phone_home">Telefon hjem</label><br/>
<%= text_field 'member', 'phone_home', :class => :half %></p>

<br clear="all"/>
<p><label for="member_phone_work">Telefon arbeid</label><br/>
<%= text_field 'member', 'phone_work', :class => :half %></p>

<p><label for="member_birthdate">Fødselsdato (format yyyy-mm-dd)</label><br/>
<%=text_field 'member', 'birthdate', :class => :half %>
<%="#{((Date.today - @member.birthdate.to_date) / 365).to_i} år" if @member.birthdate %>
</p>

<p><label for="member_male">Kjønn</label><br/>
<%=select "member", "male", [['Mann', true], ['Kvinne', false]] %></p>

		</td>
		<td valign="top">
<p><label for="member_joined_on">Innmeldingsdato</label><br/>
<%= date_select 'member', 'joined_on', :start_year=>1982 %></p>

<p><label for="member_contract_id">Medlemsnummer</label><br/>
<%= text_field 'member', 'contract_id', :class => :half %></p>

<p><label for="member_cms_contract_id">CMS Kontraktnummer</label><br/>
<%= text_field 'member', 'cms_contract_id', :class => :half %></p>

<p><label for="member_left_on">Utmeldt dato</label><br/>
<%=text_field :member, :left_on, :value => @member.left_on && @member.left_on.strftime('%Y-%m-%d'), :size => 10 %>
<a href="#" onclick="cal.select(document.forms[0].member_left_on,'anchor1','yyyy-MM-dd'); return false;" name="anchor1" id="anchor1">Velg</a>
</p>

<p><label for="member_parent_name">Foresattes navn</label><br/>
<%= text_field 'member', 'parent_name', :class => :full %></p>

<p><label for="member_phone_parent">Foresattes telefon</label><br/>
<%= text_field 'member', 'phone_parent', :class => :half %></p>

<p style="float: left"><label for="member_billing_type">Faktureringsmåte</label><br/>
  <%=select 'member', 'billing_type', [['AutoGiro', 'AUTOGIRO'], ['Manuell Giro', 'MANUELL GIRO'], ['AvtaleGiro', 'AvtaleGiro'], @member.billing_type && [@member.billing_type, @member.billing_type]].compact.uniq.sort %>
</p>

<p style="float: right"><label for="member_account_no">Kontonummer</label><br/>
  <%=text_field 'member', 'account_no', :class => :half %>
</p>

<br clear="all"/>

<p><label for="member_billing_name">Fakturanavn (hvis annen enn medlem)</label><br/>
<%= text_field 'member', 'billing_name', :class => :full %></p>

<p><label for="member_billing_address">Fakturaadresse</label><br/>
<%= text_field 'member', 'billing_address', :class => :full %></p>

<p><label for="member_billing_postal_code">Fakturapostnummer</label><br/>
<%= text_field 'member', 'billing_postal_code', :class => :postal_code %></p>

		</td>

		<td valign="top">
<p>
<% @groups.each do |g| %>
  <%=check_box_tag "member_group_ids[#{g.id}]", g.id, @member.groups.include?(g) %>
  <label for="member_group_ids_<%=g.id%>" <%='style="font-weight: bold"' if g.contains_age(@member.age)%> >
    <% attendances_since_graduation = @member.attendances_since_graduation(g).size %>
    <%= "#{g.martial_art.name} #{g.name} #{link_to("(#{attendances_since_graduation} treninger)", :controller => :attendances, :action => :since_graduation, :id => @member.id) if attendances_since_graduation > 0}".html_safe %>
  </label><br/>
<% end %>
</p>

<p><label for="member_instructor">Instruktør</label><br/>
<%=select :member, :instructor, [['Nei', false], ['Ja', true]] %></p>

<p><label for="member_nkf_fee">NKF Hovedklubb</label><br/>
<%=select :member, :nkf_fee, [['Ja', true], ['Nei', false]] %></p>

<p><label for="member_payment_problem">Betalingsproblem</label><br/>
<%=select :member, :payment_problem, [['Nei', false], ['Ja', true]] %></p>

<p><label for="member_rfid">RFID</label><br/>
<%=text_field 'member', 'rfid', :class => :full %></p>

<p><label for="member_Kommentar">Kommentar</label><br/>
<%=text_area 'member', 'comment', :cols => 47, :rows => 12 %></p>

		</td>

	</tr>
</table>

<br clear="all"/>
<!--[eoform:member]-->
